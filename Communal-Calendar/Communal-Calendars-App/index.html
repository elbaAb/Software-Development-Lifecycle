<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="base.css" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy"
content="
  default-src 'self';
  connect-src 'self' http://localhost:3000;
  script-src 'self';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data:;
">
  
  
    <title>Communal Calendar</title>
  </head>
  <body>
    <div class="nav-bar">
      <!-- show Sign In Button when user is not logged in -->
      <div class="signInButton">
        <button>Sign In</button>
      </div>
      
      <!-- User display shown when user is logged in -->
<div id="user-display" class="user-display">
  <div class="profile-container">
    <img id="profile-picture" class="profile-picture" src="" alt="Profile">
    <span id="username-display"></span>
    <div class="profile-menu">
      <button id="change-profile-pic">Change Picture</button>
      <button id="sign-out-btn">Sign Out</button>
    </div>
  </div>
</div>
      
      <div class="nav-button" id="friends-button"></div>
      <div class="nav-button" id="filter-button"></div>
      <div class="nav-button" id="events-button">
            
      </div>
      
      <!-- Filter Nav Menu -->
      <div class="filterDropdown">
        <button>Filter</button>
        <div id="filterMenuStuff">
          <button id="addCategoryBtn" class="add-category-btn">+</button>
        </div>
      </div>
      <!-- End of Filter Nav Menu -->
      
      <!-- Friends drop down -->
      <div class = "nav-button" id="friends-dropdown">
        <button id="friends-dropdown-button">Friends</button> 
        <div id="friends-dropdown-content"></div>
      </div>


      <button id="toggle-today-btn" class="nav-right-btn">Upcoming Events</button>
</div>
       
      <!-- Sign in Pop -->
      <!-- Sign in overlay -->
      <div class = "signInPopUpOverlay">
          <div class = "signInPopUp">
            <span class="closeSignInPopUp">&times;</span>
            <div class = "signInPopUpContent">
              <p>Sign In</p>
              <input type="text" placeholder="Email" id = "emailInput"/>
              <input type="text" placeholder="Username" id = "userNameInput"/>
              <input type="password" placeholder="Password" id = "passwordInput"/>
              <input type="submit" id = "signInSubmit" value = "Log In">
            </div>
            <div class="text-center">
              <button id="Register-Account">
                Register Account
              </button>
            </div>
          </div>
        </div>
        <!-- End of Sign in -->
        <!-- Add Category Pop Up -->
        <div class="addCategoryPopupOverlay">
          <div class="addCategoryPopUp">
          <span class="closeAddCategoryPopUp">&times;</span>
            <div class="addCategoryPopUpContent">
              <p>Add Category</p>
              <input type="text" id="newCategoryInput" placeholder="Name">
              <input type="color" id="newCategoryColor" value="#ff0000">
              <div><input type="radio" name="catPrivacy" id="friends" checked> <label for="Cat-Friends">Friends</label></div>
              <div><input type="radio" name="catPrivacy" id="favorites" checked> <label for="Cat-Favorites">Favorites</label></div>
              <div><input type="radio" name="catPrivacy" id="private" checked> <label for="Cat-Private">Private</label></div>
              <button id="saveCategoryBtn">Add</button>
            </div>
          </div>
        </div>
      <!-- End of Add Category Pop Up -->
    </div>
    <!-- Sign in overlay -->
    <div class = "signInPopUpOverlay">
        <div class = "signInPopUp">
          <span class="closeSignInPopUp">&times;</span>
          <div class = "signInPopUpContent">
            <p>Sign In</p>
            <input type="text" placeholder="Email" id = "emailInput"/>
            <input type="text" placeholder="Username" id = "userNameInput"/>
            <input type="password" placeholder="Password" id = "passwordInput"/>
            <input type="submit" id = "signInSubmit" value = "Log In">
          </div>
          <div class="text-center">
            <button id="Register-Account">
              Register Account
            </button>
          </div>
        </div>
      </div>
      <!-- End of Sign in -->
      <!-- Add Category Pop Up -->
      <div class="addCategoryPopupOverlay">
        <div class="addCategoryPopUp">
        <span class="closeAddCategoryPopUp">&times;</span>
          <div class="addCategoryPopUpContent">
            <p>Add Category</p>
            <input type="text" id="newCategoryInput" placeholder="Name">
            <input type="color" id="newCategoryColor" value="#ff0000">
            <div><input type="radio" name="catPrivacy" id="friends" checked> <label for="Cat-Friends">Friends</label></div>
            <div><input type="radio" name="catPrivacy" id="favorites" checked> <label for="Cat-Favorites">Favorites</label></div>
            <div><input type="radio" name="catPrivacy" id="private" checked> <label for="Cat-Private">Private</label></div>
            <button id="saveCategoryBtn">Add</button>
          </div>
        </div>
      </div>
    </div>
    <div class="main">
  <div class="calendar-container">

  <div class="calendar-day-header">
    <div class="hour-header"></div>
    <div class="day-header">Mon</div>
    <div class="day-header">Tue</div>
    <div class="day-header">Wed</div>
    <div class="day-header">Thu</div>
    <div class="day-header">Fri</div>
    <div class="day-header">Sat</div>
    <div class="day-header">Sun</div>
  </div>

  <div class="calendar-scroll-area">

    <div class="hours-column">
      <div class="hour">12 AM</div><div class="hour">1 AM</div><div class="hour">2 AM</div>
      <div class="hour">3 AM</div><div class="hour">4 AM</div><div class="hour">5 AM</div>
      <div class="hour">6 AM</div><div class="hour">7 AM</div><div class="hour">8 AM</div>
      <div class="hour">9 AM</div><div class="hour">10 AM</div><div class="hour">11 AM</div>
      <div class="hour">12 PM</div><div class="hour">1 PM</div><div class="hour">2 PM</div>
      <div class="hour">3 PM</div><div class="hour">4 PM</div><div class="hour">5 PM</div>
      <div class="hour">6 PM</div><div class="hour">7 PM</div><div class="hour">8 PM</div>
      <div class="hour">9 PM</div><div class="hour">10 PM</div><div class="hour">11 PM</div>
    </div>

    <div id="calendarGrid" class="calendar-grid">
      <!-- This MUST contain calendarBox for correct absolute positioning -->
      <div id="calendarBox"></div>
        <div id="friendsBox"></div>  <!-- ✅ FRIEND OVERLAY LAYER -->
    </div>
</div>
        <search class="bottom-section">
          <form class="search-container" id="get-calendar-data">
            <div class="search-section">
              <div class="search-item">
                <label for="Event">Event: </label> <input name="Event" id="Event" type="text" placeholder="Enter Event Name Here">
              </div>
                
              <div class="search-item">
                <label for="Start-Date">Start Date: </label> <input name="Start-Date" id="Start-Date" type="date">
              </div>
              
              <div class="search-item">
                <label for="Start-Time">Start Time: </label> <input name="Start-Time" id="Start-Time" type="time">
              </div>
              <div class="search-item">
                <label for="End-Time">End Time: </label> <input name="End-Time" id="End-Time" type="time">
              </div>
                
              <div class="search-item">
                <label for="End-Date">Final Repeat: </label> <input name="End-Date" id="End-Date" type="date">
              </div>
            </div>
            
            <div class="search-section">
              <div class="search-item">
                <label for="Travel-Time">Travel Time: </label> <input name="Travel-Time" id="Travel-Time" type="number" step="5" min = "0" max = "1440" placeholder="Min">
              </div>
              <div class="search-item">
                <label>Privacy:</label>
              </div>

              <div class="search-item">
                <input type="radio" name="Privacy" id="Privacy-Public" checked> <label for="Privacy-Friends">Friends</label>
              </div>

              <div class="search-item">
                <input type="radio" name="Privacy" id="Privacy-Favorite"> <label for="Privacy-Favorite">Favorites Only</label>
              </div>

              <div class="search-item">
                <input type="radio" name="Privacy" id="Privacy-Private"> <label for="Privacy-Private">Private</label>
              </div>
            </div>
            <div class="search-section">
              <div class="search-item">
                <label for="Repeat">Repeat Frequency</label>
              </div>
              
              <div class="search-item">
                <select name="Repeat" id="Repeat">
                  <option value="One-Time">One-Time</option>
                  <option value="Weekly">Weekly</option>
                  <option value="Biweekly">Biweekly</option>
                  <option value="Monthly">Monthly</option>
                  <option value="Bimonthly">Bimonthly</option>
                  <option value="Biannualy">Biannualy</option>
                  <option value="Annualy">Annualy</option>
                </select>
              </div>
              <div class="days-section">
                <div class ="search-section">
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="sunday"><label for="sunday">Sunday</label>
                  </div>
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="monday"><label for="monday">Monday</label>
                  </div>
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="tuesday"><label for="tuesday">Tuesday</label>
                  </div>
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="wednesday"><label for="wednesday">Wednesday</label>
                  </div>
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="thursday"><label for="thursday">Thursday</label>
                  </div>
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="friday"><label for="friday">Friday</label>
                  </div>
                  <div class="search-item">
                    <input type="checkbox" name="Day" id="saturday"><label for="saturday">Saturday</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="search-section">
              <div class="search-item">
                <input type="text" name="Search-Friends" id="Search-Friends" placeholder="Include friends">
              </div>
                
              <div class="search-item">
                <div id="search-friends-section">
                </div>
              </div>
            </div>
            
            <div class="search-section">
              <input class="text-center" type="submit" value="submit">
            </div>
          </form>
        </search>
      </div>
      
      <div class="right-section text-center">
          <div class="rsvp-box">
            RSVP
            <div class = "rsvp-content">
              <div>test</div>
              <div>test</div>
              <div>test</div>
              <div>test</div>
              <div>test</div>
              <div>test</div>
              <div>test</div>
              <div>test</div>
            </div>
          </div>
          <div class="box" id="today-box">
            <h3>Upcoming Event Search</h3>
            <input
              id="events-search"
              type="search"
              placeholder="Search by title, date, time..."
              aria-label="Search events"
            />
            <div id="today-event" aria-live="polite">Loading…</div>
          </div>
      </div>
    </div>
    
    <script type="module" src="render.js"></script>
    
 <div id="eventPopup" class="event-popup-overlay">
  <div class="event-popup">

    <label>Event Name</label>
    <input id="popupEventName" type="text" />

    <label>Start Date</label>
    <input id="popupStartDate" type="date" />

    <label>Start Time</label>
    <input id="popupStartTime" type="time" />

    <label>End Time</label>
    <input id="popupEndTime" type="time" />

    <label>Repeat</label>
    <select id="popupRepeat">
      <option value="none">One-time</option>
      <option value="weekly">Weekly</option>
    </select>

    <label>Privacy</label>
    <div class="popup-radio-group">
      <label>
        <input type="radio" name="popupPrivacy" value="public" checked />
        Public
      </label>
      <label>
        <input type="radio" name="popupPrivacy" value="friends" />
        Friends
      </label>
      <label>
        <input type="radio" name="popupPrivacy" value="private" />
        Private
      </label>
    </div>

    <label>Travel Time (minutes)</label>
    <input id="popupTravelTime" type="number" value="0" min="0" />

    <label>Friends</label>
    <div class="popup-row">
      <button id="popupFriendsBtn" type="button">Invite Friends</button>
      <span id="popupFriendsSummary">(none)</span>
    </div>

    <div class="event-popup-buttons">
      <button id="popupSaveBtn">Save</button>
      <button id="popupCancelBtn">Cancel</button>
    </div>

  </div>
</div>

<div id="popupFriendsPicker" class="friends-picker" style="display:none;">
  <div class="friends-picker-header">Invite Friends</div>

  <div id="popupFriendsList"></div>

  <div class="friends-picker-buttons">
    <button id="popupFriendsDone">Done</button>
  </div>
</div>
</div>
</body>
</html>